{"version":3,"sources":["index.js"],"names":["hereCredentials","geocodeUrl","query","concat","routeUrl","start","end","mode","App","props","_this","Object","_Users_babbs_Desktop_routing_tool_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","_Users_babbs_Desktop_routing_tool_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_Users_babbs_Desktop_routing_tool_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","newRow","copy","assign","state","table","push","provider","shape","setState","editRow","val","row","col","go","_Users_babbs_Desktop_routing_tool_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_babbs_Desktop_routing_tool_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee3","geocodePromises","geocoded","routePromises","routes","geojson","element","file","wrap","_context3","prev","next","console","log","map","_ref2","_callee","i","_context","fetch","then","res","json","sent","startCoordinates","Response","View","Result","Location","NavigationPosition","endCoordinates","abrupt","stop","_x","_x2","apply","arguments","Promise","all","_ref3","_callee2","path","_context2","Latitude","Longitude","response","route","length","x","vals","split","Number","_x3","_x4","type","features","r","geometry","coordinates","properties","startAddress","endAddress","document","createElement","Blob","JSON","stringify","href","URL","createObjectURL","download","body","appendChild","click","_this2","grid","gridTemplateColumns","keys","react__WEBPACK_IMPORTED_MODULE_7___default","className","onClick","key","style","z","q","value","onChange","evt","target","React","Component","ReactDOM","render","getElementById"],"mappings":"kOAIMA,SACA,wBADAA,EAEE,yBAGFC,EAAa,SAACC,GAAD,+DAAAC,OACwCH,EADxC,cAAAG,OACuEH,EADvE,gBAAAG,OAC0GD,IACvHE,EAAW,SAACC,EAAOC,EAAKC,GAAb,2EAAAJ,OACsDH,EADtD,cAAAG,OACqFH,EADrF,mBAAAG,OAC2HE,EAD3H,mBAAAF,OACkJG,EADlJ,kBAAAH,OACsKI,EADtK,4CAGXC,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAcRQ,OAAS,WACP,IAAMC,EAAOP,OAAOQ,OAAOT,EAAKU,MAAMC,MAAO,IAC7CH,EAAKI,KAAK,CACRjB,MAAO,GACPC,IAAK,GACLiB,SAAU,GACVhB,KAAM,aACNiB,MAAO,KAETd,EAAKe,SAAS,CACZJ,MAAOH,KAzBQR,EA6BnBgB,QAAU,SAACC,EAAKC,EAAKC,GACnB,IAAMR,EAAQV,OAAOQ,OAAOT,EAAKU,MAAMC,MAAO,IAC9CA,EAAMQ,GAAKD,GAAOD,EAClBjB,EAAKe,SAAS,CAAEJ,WAhCCX,EAmCnBoB,GAnCmBnB,OAAAoB,EAAA,EAAApB,CAAAqB,EAAAC,EAAAC,KAmCd,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAV,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACHC,QAAQC,IAAI,SACNZ,EAAkB1B,EAAKU,MAAMC,MAAM4B,IAAjB,eAAAC,EAAAvC,OAAAoB,EAAA,EAAApB,CAAAqB,EAAAC,EAAAC,KAAqB,SAAAiB,EAAOvB,EAAKwB,GAAZ,IAAA/C,EAAAC,EAAA,OAAA0B,EAAAC,EAAAU,KAAA,SAAAU,GAAA,cAAAA,EAAAR,KAAAQ,EAAAP,MAAA,cAAAO,EAAAP,KAAA,EACvBQ,MAAMrD,EAAW2B,EAAIvB,QAAQkD,KAAK,SAACC,GAAD,OACpDA,EAAIC,SAFqC,cACrCpD,EADqCgD,EAAAK,KAAAL,EAAAP,KAAA,EAIzBQ,MAAMrD,EAAW2B,EAAItB,MAAMiD,KAAK,SAACC,GAAD,OAASA,EAAIC,SAJpB,cAIrCnD,EAJqC+C,EAAAK,KAM3C9B,EAAI+B,iBACFtD,EAAMuD,SAASC,KAAK,GAAGC,OAAO,GAAGC,SAASC,mBAAmB,GAC/DpC,EAAIqC,eACF3D,EAAIsD,SAASC,KAAK,GAAGC,OAAO,GAAGC,SAASC,mBAAmB,GATlBX,EAAAa,OAAA,SAUpCtC,GAVoC,wBAAAyB,EAAAc,SAAAhB,MAArB,gBAAAiB,EAAAC,GAAA,OAAAnB,EAAAoB,MAAAzD,KAAA0D,YAAA,IAFrB3B,EAAAE,KAAA,EAeoB0B,QAAQC,IAAIrC,GAfhC,cAeGC,EAfHO,EAAAc,KAiBGpB,EAAgBD,EAASY,IAAT,eAAAyB,EAAA/D,OAAAoB,EAAA,EAAApB,CAAAqB,EAAAC,EAAAC,KAAa,SAAAyC,EAAO/C,EAAKwB,GAAZ,IAAAwB,EAAA,OAAA5C,EAAAC,EAAAU,KAAA,SAAAkC,GAAA,cAAAA,EAAAhC,KAAAgC,EAAA/B,MAAA,cAAA+B,EAAA/B,KAAA,EACdQ,MACjBlD,EACEwB,EAAI+B,iBAAiBmB,SAAW,IAAMlD,EAAI+B,iBAAiBoB,UAC3DnD,EAAIqC,eAAea,SAAW,IAAMlD,EAAIqC,eAAec,UACvDnD,EAAIrB,OAGLgD,KAAK,SAACC,GAAD,OAASA,EAAIC,SAClBF,KAAK,SAACC,GAEL,OADAT,QAAQC,IAAIQ,EAAIwB,SAASC,MAAM,GAAGzD,MAAM0D,QACjC1B,EAAIwB,SAASC,MAAM,GAAGzD,MAAMyB,IAAI,SAACkC,GACtC,IAAMC,EAAOD,EAAEE,MAAM,KACrB,MAAO,CAACC,OAAOF,EAAK,IAAKE,OAAOF,EAAK,SAbV,cAC3BR,EAD2BC,EAAAnB,KAgBjC9B,EAAIJ,MAAQoD,EAhBqBC,EAAAX,OAAA,SAiB1BtC,GAjB0B,wBAAAiD,EAAAV,SAAAQ,MAAb,gBAAAY,EAAAC,GAAA,OAAAd,EAAAJ,MAAAzD,KAAA0D,YAAA,IAjBnB3B,EAAAE,KAAA,EAoCkB0B,QAAQC,IAAInC,GApC9B,OAoCGC,EApCHK,EAAAc,KAqCHX,QAAQC,IAAIT,GAENC,EAAU,CACdiD,KAAM,oBACNC,SAAUnD,EAAOU,IAAI,SAAC0C,GACpB,MAAO,CACLC,SAAU,CACRH,KAAM,aACNI,YAAaF,EAAEnE,OAEjBiE,KAAM,UACNK,WAAY,CACVvE,SAAUoE,EAAEpE,SACZwE,aAAcJ,EAAEtF,MAChB2F,WAAYL,EAAErF,IACdC,KAAMoF,EAAEpF,UAMVkC,EAAUwD,SAASC,cAAc,KACjCxD,EAAO,IAAIyD,KAAK,CAACC,KAAKC,UAAU7D,EAAS,KAAM,IAAK,CACxDiD,KAAM,eAERhD,EAAQ6D,KAAOC,IAAIC,gBAAgB9D,GACnCD,EAAQgE,SAAW,iBACnBR,SAASS,KAAKC,YAAYlE,GAC1BA,EAAQmE,QAjEL,yBAAAhE,EAAAuB,SAAAhC,MAjCHzB,EAAKU,MAAQ,CACXC,MAAO,CACL,CACEhB,MAAO,uBACPC,IAAK,0BACLiB,SAAU,OACVhB,KAAM,MACNiB,MAAO,MATId,wEAuGV,IAAAmG,EAAAhG,KACDiG,EAAO,CACXC,oBAAmB,UAAA5G,OACjBQ,OAAOqG,KAAKnG,KAAKO,MAAMC,MAAM,IAAI6D,OADhB,WAIrB,OACE+B,EAAAhF,EAAAiE,cAAA,OAAKgB,UAAU,OACbD,EAAAhF,EAAAiE,cAAA,UAAQiB,QAAStG,KAAKI,QAAtB,WACAgG,EAAAhF,EAAAiE,cAAA,UAAQiB,QAAStG,KAAKiB,IAAtB,SACCjB,KAAKO,MAAMC,MAAM4B,IAAI,SAACrB,EAAKwB,GAC1B,OACE6D,EAAAhF,EAAAiE,cAAA,OAAKgB,UAAU,MAAME,IAAKhE,EAAGiE,MAAOP,GACjCnG,OAAOqG,KAAKpF,GAAKqB,IAAI,SAACqE,EAAGC,GACxB,OACEN,EAAAhF,EAAAiE,cAAA,SACEkB,IAAKG,EACL9B,KAAK,OACL+B,MAAO5F,EAAI0F,GACXG,SAAU,SAACC,GAAD,OAASb,EAAKnF,QAAQgG,EAAIC,OAAOH,MAAOF,EAAGlE,mBA3HvDwE,IAAMC,WAuITrH,YAEfsH,IAASC,OAAOd,EAAAhF,EAAAiE,cAAC1F,EAAD,MAASyF,SAAS+B,eAAe","file":"static/js/main.5fae4ee1.chunk.js","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\n\nconst hereCredentials = {\n  id: \"7Fs4xShlBdXXSRhSKKjv\",\n  code: \"9KLK-ZDQIbNbYFcQYM5uVQ\",\n};\n\nconst geocodeUrl = (query) =>\n  `https://geocoder.api.here.com/6.2/geocode.json?app_id=${hereCredentials.id}&app_code=${hereCredentials.code}&searchtext=${query}`;\nconst routeUrl = (start, end, mode) =>\n  `https://route.api.here.com/routing/7.2/calculateroute.json?app_id=${hereCredentials.id}&app_code=${hereCredentials.code}&waypoint0=geo!${start}&waypoint1=geo!${end}&mode=fastest;${mode};traffic:disabled&routeattributes=shape`;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      table: [\n        {\n          start: \"701 Pike St. Seattle\",\n          end: \"954 E Union St. Seattle\",\n          provider: \"uber\",\n          mode: \"car\",\n          shape: [],\n        },\n      ],\n    };\n  }\n\n  newRow = () => {\n    const copy = Object.assign(this.state.table, {});\n    copy.push({\n      start: \"\",\n      end: \"\",\n      provider: \"\",\n      mode: \"pedestrian\",\n      shape: [],\n    });\n    this.setState({\n      table: copy,\n    });\n  };\n\n  editRow = (val, row, col) => {\n    const table = Object.assign(this.state.table, {});\n    table[col][row] = val;\n    this.setState({ table });\n  };\n\n  go = async () => {\n    console.log(\"click\");\n    const geocodePromises = this.state.table.map(async (row, i) => {\n      const start = await fetch(geocodeUrl(row.start)).then((res) =>\n        res.json()\n      );\n      const end = await fetch(geocodeUrl(row.end)).then((res) => res.json());\n      // console.log(sxtart);\n      row.startCoordinates =\n        start.Response.View[0].Result[0].Location.NavigationPosition[0];\n      row.endCoordinates =\n        end.Response.View[0].Result[0].Location.NavigationPosition[0];\n      return row;\n    });\n\n    const geocoded = await Promise.all(geocodePromises);\n\n    const routePromises = geocoded.map(async (row, i) => {\n      const path = await fetch(\n        routeUrl(\n          row.startCoordinates.Latitude + \",\" + row.startCoordinates.Longitude,\n          row.endCoordinates.Latitude + \",\" + row.endCoordinates.Longitude,\n          row.mode\n        )\n      )\n        .then((res) => res.json())\n        .then((res) => {\n          console.log(res.response.route[0].shape.length);\n          return res.response.route[0].shape.map((x) => {\n            const vals = x.split(\",\");\n            return [Number(vals[1]), Number(vals[0])];\n          });\n        });\n      row.shape = path;\n      return row;\n    });\n    const routes = await Promise.all(routePromises);\n    console.log(routes);\n\n    const geojson = {\n      type: \"FeatureCollection\",\n      features: routes.map((r) => {\n        return {\n          geometry: {\n            type: \"LineString\",\n            coordinates: r.shape,\n          },\n          type: \"Feature\",\n          properties: {\n            provider: r.provider,\n            startAddress: r.start,\n            endAddress: r.end,\n            mode: r.mode,\n          },\n        };\n      }),\n    };\n\n    const element = document.createElement(\"a\");\n    const file = new Blob([JSON.stringify(geojson, null, 3)], {\n      type: \"text/plain\",\n    });\n    element.href = URL.createObjectURL(file);\n    element.download = \"routes.geojson\";\n    document.body.appendChild(element); // Required for this to work in FireFox\n    element.click();\n  };\n\n  render() {\n    const grid = {\n      gridTemplateColumns: `repeat(${\n        Object.keys(this.state.table[0]).length\n      }, 1fr)`,\n    };\n    return (\n      <div className=\"app\">\n        <button onClick={this.newRow}>New row</button>\n        <button onClick={this.go}>Route</button>\n        {this.state.table.map((row, i) => {\n          return (\n            <div className=\"row\" key={i} style={grid}>\n              {Object.keys(row).map((z, q) => {\n                return (\n                  <input\n                    key={q}\n                    type=\"text\"\n                    value={row[z]}\n                    onChange={(evt) => this.editRow(evt.target.value, z, i)}\n                  />\n                );\n              })}\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport default App;\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}