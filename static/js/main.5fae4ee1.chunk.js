(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(11)},11:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(2),s=n(4),c=n(5),i=n(8),u=n(6),p=n(9),d=n(0),l=n.n(d),f=n(7),h=n.n(f),m=(n(18),"7Fs4xShlBdXXSRhSKKjv"),b="9KLK-ZDQIbNbYFcQYM5uVQ",w=function(e){return"https://geocoder.api.here.com/6.2/geocode.json?app_id=".concat(m,"&app_code=").concat(b,"&searchtext=").concat(e)},g=function(e,t,n){return"https://route.api.here.com/routing/7.2/calculateroute.json?app_id=".concat(m,"&app_code=").concat(b,"&waypoint0=geo!").concat(e,"&waypoint1=geo!").concat(t,"&mode=fastest;").concat(n,";traffic:disabled&routeattributes=shape")},v=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).newRow=function(){var e=Object.assign(n.state.table,{});e.push({start:"",end:"",provider:"",mode:"pedestrian",shape:[]}),n.setState({table:e})},n.editRow=function(e,t,a){var r=Object.assign(n.state.table,{});r[a][t]=e,n.setState({table:r})},n.go=Object(o.a)(r.a.mark(function e(){var t,a,s,c,i,u,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("click"),t=n.state.table.map(function(){var e=Object(o.a)(r.a.mark(function e(t,n){var a,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(w(t.start)).then(function(e){return e.json()});case 2:return a=e.sent,e.next=5,fetch(w(t.end)).then(function(e){return e.json()});case 5:return o=e.sent,t.startCoordinates=a.Response.View[0].Result[0].Location.NavigationPosition[0],t.endCoordinates=o.Response.View[0].Result[0].Location.NavigationPosition[0],e.abrupt("return",t);case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),e.next=4,Promise.all(t);case 4:return a=e.sent,s=a.map(function(){var e=Object(o.a)(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g(t.startCoordinates.Latitude+","+t.startCoordinates.Longitude,t.endCoordinates.Latitude+","+t.endCoordinates.Longitude,t.mode)).then(function(e){return e.json()}).then(function(e){return console.log(e.response.route[0].shape.length),e.response.route[0].shape.map(function(e){var t=e.split(",");return[Number(t[1]),Number(t[0])]})});case 2:return a=e.sent,t.shape=a,e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),e.next=8,Promise.all(s);case 8:c=e.sent,console.log(c),i={type:"FeatureCollection",features:c.map(function(e){return{geometry:{type:"LineString",coordinates:e.shape},type:"Feature",properties:{provider:e.provider,startAddress:e.start,endAddress:e.end,mode:e.mode}}})},u=document.createElement("a"),p=new Blob([JSON.stringify(i,null,3)],{type:"text/plain"}),u.href=URL.createObjectURL(p),u.download="routes.geojson",document.body.appendChild(u),u.click();case 17:case"end":return e.stop()}},e)})),n.state={table:[{start:"701 Pike St. Seattle",end:"954 E Union St. Seattle",provider:"uber",mode:"car",shape:[]}]},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t={gridTemplateColumns:"repeat(".concat(Object.keys(this.state.table[0]).length,", 1fr)")};return l.a.createElement("div",{className:"app"},l.a.createElement("button",{onClick:this.newRow},"New row"),l.a.createElement("button",{onClick:this.go},"Route"),this.state.table.map(function(n,a){return l.a.createElement("div",{className:"row",key:a,style:t},Object.keys(n).map(function(t,r){return l.a.createElement("input",{key:r,type:"text",value:n[t],onChange:function(n){return e.editRow(n.target.value,t,a)}})}))}))}}]),t}(l.a.Component);t.default=v,h.a.render(l.a.createElement(v,null),document.getElementById("root"))},18:function(e,t,n){}},[[10,1,2]]]);
//# sourceMappingURL=main.5fae4ee1.chunk.js.map